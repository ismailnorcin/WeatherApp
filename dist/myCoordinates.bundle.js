(()=>{"use strict";let t={title:"Koordinatlarım",breadcrumbCover:"ol.breadcrumb",breadcrumb:'<li class="breadcrumb-item active" aria-current="page">Koordinatlarım</li>',form:"#locationForm",formLat:"#latitude",formLang:"#longitude",formMessage:".result",extra:{formLocation:"#location",locationTable:"#table tbody",removeButton:".remove-button",currentLocation:"#currentLocation"}};class e{constructor(t){this._pageTitle=t.title,this._pageBreadcrumbItem='<li class="breadcrumb-item"><a href="#">App</a></li>'+t.breadcrumb,this._pageBreadcrumbCover=t.breadcrumbCover,this._formMessage=t.formMessage,this._form=t.form,this._formLatitude=t.formLat,this._formLongitude=t.formLang,this._extra=t.extra}get title(){return this._pageTitle}get message(){return this._formMessage}get extra(){return this._extra}get breadcrumbCover(){return document.querySelector(this._pageBreadcrumbCover)}get breadcrumbItem(){return this._pageBreadcrumbItem}get form(){return document.querySelector(this._form)}get formLat(){return document.querySelector(this._formLatitude)}get formLong(){return document.querySelector(this._formLongitude)}}var r,o,a;const n=document.querySelector(t.extra.formLocation),i=document.querySelector(t.extra.locationTable),l=document.querySelector(t.extra.currentLocation),d=new class{constructor(t){this._page=new e(t)}setTitle(){return document.title=this._page.title,this}setBreadcrumb(){let t=(new DOMParser).parseFromString(this._page.breadcrumbItem,"text/html").body.childNodes;return Array.from(t).forEach((t=>{var e;null===(e=this._page.breadcrumbCover)||void 0===e||e.appendChild(t)})),this}page(){return this._page}}(t),u=new class{latRules(t){return isNaN(t)?t.replace(/[^\d]+/g,""):t}longRules(t){return isNaN(t)?t.replace(/[^\d]+/g,""):t}};let c=new class{constructor(){this._data="data",this._locations="locations"}updateData(t){throw new Error("Method not implemented.")}supportStorageType(){return!!window.localStorage&&"function"==typeof localStorage.getItem&&"function"==typeof localStorage.setItem&&"function"==typeof localStorage.removeItem}connectDb(){if(this.supportStorageType())return window.localStorage;throw new Error("Method not implemented.")}getLocation(t){let e=this.connectDb(),r=e.getItem(this._data)?e.getItem(this._data):JSON.stringify([]);return 0===t?JSON.parse(r):JSON.parse(r).filter((e=>e.id==t))}insertLocation(t){let e=this.connectDb();return console.log(e),!0}updateLocation(t){throw new Error("Method not implemented.")}deleteLocation(t){throw new Error("Method not implemented.")}insertBatchLocation(t){throw new Error("Method not implemented.")}updateBatchLocation(t){throw new Error("Method not implemented.")}deleteBatchLocation(t){throw new Error("Method not implemented.")}insertData(t){let e,r=this.connectDb(),o=r.getItem(this._data);e=null!==o?JSON.parse(o):[];let a=e.length,n=a>0?e[a-1].id:0;const i={id:Number(n)+1,latitude:t.latitude,longitude:t.longitude,location:t.location};e.push(i),r.setItem(this._data,JSON.stringify(e))}deleteData(t){let e=this.connectDb(),r=e.getItem(this._data);if(null!==r){let o=JSON.parse(r);o.forEach(((e,r)=>{e.id===t&&o.splice(r,1)})),e.setItem(this._data,JSON.stringify(o))}}};null===(r=d.page().form)||void 0===r||r.addEventListener("submit",(t=>{var e,r;t.preventDefault();let o={latitude:Number(null===(e=d.page().formLat)||void 0===e?void 0:e.value),longitude:Number(null===(r=d.page().formLong)||void 0===r?void 0:r.value),location:null==n?void 0:n.value};c.insertData(o),s(0),t.target.reset()})),l.addEventListener("click",(t=>{t.preventDefault(),navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){let e={latitude:Number(t.coords.latitude.toFixed(4)),longitude:Number(t.coords.longitude.toFixed(4)),location:"My Location"};c.insertData(e),s(0)})):alert("Hizmet desteklenmiyor")})),null===(o=d.page().formLat)||void 0===o||o.addEventListener("input",(t=>{let e=t.target;e.value=u.latRules(e.value)})),null===(a=d.page().formLong)||void 0===a||a.addEventListener("input",(t=>{let e=t.target;e.value=u.longRules(e.value)}));let s=(e=0)=>{let r=c.getLocation(e),o="";r.forEach((t=>{o+=`\n        <tr>\n        <td>${t.location}</td>\n        <td>${t.latitude}</td>\n        <td>${t.longitude}</td>\n        <td><label class="badge badge-danger remove-button" row-id="${t.id}">Sil</label></td>\n        </tr>\n        `})),i.innerHTML=o,document.querySelectorAll(t.extra.removeButton).forEach((t=>{t.addEventListener("click",(t=>{let e=t.target.getAttribute("row-id");c.deleteData(Number(e)),s(0),alert("mşmşmş")}))}))};d.setTitle().setBreadcrumb(),s(0)})();